<!DOCTYPE html>

<html lang="en">
<!--begin::Head-->
<head>
    <base href="">
    {% load static %}
    <meta charset="utf-8"/>
    <title></title>
    <meta name="description" content="Updates and statistics"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <!--begin::Fonts-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700"/>
    <!--end::Fonts-->
    <!--begin::Page Vendors Styles(used by this page)-->
    <link href="{% static 'plugins/custom/fullcalendar/fullcalendar.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <!--end::Page Vendors Styles-->
    <!--begin::Global Theme Styles(used by all pages)-->
    <link href="{% static 'plugins/global/plugins.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'plugins/custom/prismjs/prismjs.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'css/style.bundle.css' %}" rel="stylesheet" type="text/css"/>
    <!--end::Global Theme Styles-->
    <!--begin::Layout Themes(used by all pages)-->
    <!--end::Layout Themes-->
    <link rel="shortcut icon" href="assets/media/logos/favicon.ico"/>
</head>
<!--end::Head-->
<!--begin::Body-->
<body id="kt_body"
      class="header-mobile-fixed subheader-enabled aside-enabled aside-fixed aside-secondary-enabled page-loading">
<!--begin::Main-->
<!--begin::Header Mobile-->
<div id="kt_header_mobile" class="header-mobile">
    <!--begin::Logo-->
    <a href="index.html">
        <img alt="Logo" src="assets/media/logos/logo-letter-2.png" class="logo-default max-h-30px"/>
    </a>
    <!--end::Logo-->
    <!--begin::Toolbar-->
    <div class="d-flex align-items-center">
        <button class="btn p-0 burger-icon burger-icon-left" id="kt_aside_mobile_toggle">
            <span></span>
        </button>
    </div>
    <!--end::Toolbar-->
</div>
<!--end::Header Mobile-->
<div class="d-flex flex-column flex-root">
    <!--begin::Page-->
    <div class="d-flex flex-row flex-column-fluid page">
        <!--begin::Aside-->
        {% include 'base_templates/aside.html' %}


        <!--end::Aside-->
        <!--begin::Wrapper-->
        <div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
            <!--begin::Content-->
            <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
                <!--begin::Subheader-->
                <div class="" id="kt_subheader">
                    <div class="container-fluid">
                        <!--begin::Info-->

                        <!--end::Info-->


                        <!-- Sidebar -->
                        <!-- End of Sidebar -->

                        <!-- Content Wrapper -->
                        <div class="">

                            <!-- Main Content -->
                            <div id="">
                                <script>
$(document).ready(function(){

    $(".editableBox22").change(function(){
        $(".timeTextBox22").val($(".editableBox22 option:selected").html());
    });
});

$(document).ready(function(){

    $(".editableBoxa22").change(function(){
        $(".timeTextBoxa22").val($(".editableBoxa22 option:selected").html());
    });
});


$(document).ready(function(){

    $(".editableBoxaa").change(function(){
        $(".timeTextBoxaa").val($(".editableBoxaa option:selected").html());
    });
});

                                </script>

                                <!-- Topbar -->
                                <!-- End of Topbar -->

                                <style>

* {
color:;
}
  .faicons {
  font-size: 18px;
  margin-top: 20px;
  padding-left: 10px;
  padding-right: 10px;
  color: #5a5c69;
  }

  .icon-border {
  border: 1px solid #d1d3e2;
  border-radius: 5px 1px 1px 5px;
  border-right: none;


  }

  .control-label {
  color: black;

  }


                                </style>
                                <style>
          .editableBox, .editableBox1,.editableBoxa22  {
    width: 70%;
    height: 30px;
}

.timeTextBox, .timeTextBox1 , .timeTextBoxa22 {
    width: 65%;
    margin-left: -70%;
    height: 25px;
    border: none;
}

          .editableBox22  {
    width: 70%;
    height: 30px;
}

.timeTextBox22 {
    width: 65%;
    margin-left: -70%;
    height: 25px;
    border: none;
}


.editableBoxa,.editableBoxa1 {
    width: 70%;
    height: 30px;
}

.timeTextBoxa,.timeTextBoxa1 {
    width: 65%;
    margin-left: -70%;
    height: 25px;
    border: none;
}


.editableBoxaa ,.editableBoxaa1 {
    width: 70%;
    height: 30px;
}

.timeTextBoxaa ,.timeTextBoxaa1{
    width: 65%;
    margin-left: -70%;
    height: 25px;
    border: none;
}



.editableBoxz {
    width: 70%;
    height: 30px;
}

.timeTextBoxz {
    width: 65%;
    margin-left: -70%;
    height: 25px;
    border: none;
}


                                </style>

                                <!-- Begin Page Content -->
                                <div style="margin-top: 5vh;">
                                    <center>
                                        <!-- Page Heading -->
                                        <h1 class="h3 mb-0 text-gray-800"> Add Product</h1>
                                    </center>
                                    {% if msg %}

                                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        <strong>Error : </strong> {{msg}}
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    {% endif %}
                                    {% if messages %}
                                    {% for message in messages %}
                                    {% if message.tags == 'success' %}
                                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                                        <strong>Success : </strong> {{ message }}
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    {% elif message.tags == 'error' %}
                                    <div class="alert alert-danger alert-dismissible fade show" role="alert">
                                        <strong>Error : </strong> {{ message }}
                                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    {% endif %}


                                    {% endfor %}

                                    {% endif %}

                                    <br>
                                    <br>
                                    <div id="rec_data"></div>

                                    <form method="POST" action="" onsubmit="return isOneChecked();">{% csrf_token %}


                                        <div class="form-group row">

                                            <label class="col-md-2 control-label">Type of Scale *
                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-balance-scale faicons"></i></span>

                                                    <select id="divselector" required onchange="choice1(this)"
                                                            class="form-control">
                                                        <option value="">Select Scale Type</option>

                                                        {% for item in type_purchase %}
                                                        <option value="{{item.pk}}">{{item.name}}</option>

                                                        {% endfor %}

                                                    </select>


                                                </div>
                                            </div>

                                            <label class="col-md-2 control-label">Model *


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-balance-scale faicons"></i></span>

                                                    <select id="id_subcat" required onchange="choicemodel(this)"
                                                            class="form-control">


                                                    </select>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group row">


                                            <label class="col-md-2 control-label">Sub Model *


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-balance-scale faicons"></i></span>

                                                    <select id="id_subcat2" onchange="choice_sub_model(this)"
                                                            class="form-control">


                                                    </select>


                                                </div>
                                            </div>

                                            <label class="col-md-2 control-label">Sub Sub Model *


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-balance-scale faicons"></i></span>

                                                    <select required id="id_subcat22"
                                                            onchange="choice_sub_sub_model(this)" class="form-control">


                                                    </select>


                                                </div>
                                            </div>
                                        </div>


                                        <div class="form-group row">
                                            <label class="col-md-2 control-label">Brand


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-balance-scale faicons"></i></span>
                                                    <input value="HSCO" type="text" placeholder="brand"
                                                           class="form-control" name="brand">
                                                    <!--<datalist style="height:20px;" id="brand">-->
                                                    <!--<option value = "HSCO"></option>-->
                                                    <!--</datalist>-->
                                                </div>
                                            </div>
                                            <label class="col-md-2 control-label">Unit *


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-list faicons"></i></span>
                                                    <input type="text" required placeholder="unit" value="kg"
                                                           class="form-control" name="unit" list="unit">
                                                    <datalist style="height:20px;" id="unit">
                                                        <option value="gm"></option>
                                                        <option value="kg"></option>
                                                        <option value="Ton"></option>
                                                        <option value="Liter"></option>
                                                        <option value="ml"></option>
                                                        <option value="meter"></option>
                                                        <option value="inch"></option>
                                                        <option value="foot"></option>
                                                    </datalist>
                                                </div>
                                            </div>


                                        </div>


                                        <div id="product_details">
                                            <div class="form-group row">

                                                <label class="col-md-2 control-label">Capacity *

                                                </label>

                                                <div class="col-md-4 inputGroupContainer">
                                                    <div class="input-group">
                                                        <span class="input-group-addon icon-border"><i
                                                                class="fa fa-truck faicons"></i></span>
                                                        <input name="capacity" required placeholder="Capacity"
                                                               class="form-control" type="text" value="">
                                                    </div>
                                                </div>
                                                <label class="col-md-2 control-label">Rate *


                                                </label>
                                                <div class="col-md-4 inputGroupContainer">
                                                    <div class="input-group">
                                                        <span class="input-group-addon icon-border"><i
                                                                class="fa fa-user faicons"></i></span>
                                                        <input required placeholder="Rate" class="form-control"
                                                               id="rate" onkeyup="total_product_amount()" step="0.2"
                                                               type="number">
                                                    </div>
                                                </div>


                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-md-2 control-label">Quantity *

                                            </label>

                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-suitcase faicons"></i></span>
                                                    <input name="quantity" placeholder="Quantity" id="quantity"
                                                           onkeyup="total_product_amount()" required
                                                           class="form-control" type="number" value="1">
                                                </div>
                                            </div>


                                            <label class="col-md-2 control-label">Amount *


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-user faicons"></i></span>
                                                    <input name="value_of_goods" required placeholder="Rate x quantity"
                                                           id="amount" onclick="total_product_amount()"
                                                           class="form-control" step="0.2" type="number">
                                                </div>
                                            </div>
                                            <!--                    <label class="col-md-2 control-label">Purchase Type:-->

                                            <!--</label>-->

                                            <!--    <div class="col-md-4 inputGroupContainer">-->
                                            <!--  <div class="input-group">-->
                                            <!--  <span class="input-group-addon icon-border"><i class="fa fa-balance-scale faicons"></i></span>-->
                                            <!--  <input  name="purchase_type" placeholder="Purchase Type" class="form-control"  type="text" value="">-->
                                            <!--    </div>-->
                                            <!--  </div>-->


                                        </div>

                                        <div class="form-group row">


                                            <label class="col-md-2 control-label">Serial No. of Scale

                                            </label>

                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-sort-numeric-asc faicons"></i></span>
                                                    <input name="serial_no_scale" placeholder="Serial No. of Scale"
                                                           class="form-control" type="text" value="">
                                                </div>
                                            </div>


                                            <label class="col-md-2 control-label">Select Godown


                                            </label>
                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <span class="input-group-addon icon-border"><i
                                                            class="fa fa-file faicons"
                                                            style="margin-top: 20px;"></i></span>
                                                    <select required id="godown" name="godown" onchange="choice5(this)"
                                                            class="form-control">
                                                        {% if default_godown %}
                                                        <option value="{{default_godown.id}}">
                                                            {{default_godown.name_of_godown}}
                                                        </option>
                                                        {% else %}
                                                        <option value="">Select</option>
                                                        {% endif %}

                                                        {% for godown in godowns %}
                                                        <option value="{{godown.id}}">{{godown.name_of_godown}}</option>

                                                        {% endfor %}
                                                    </select>
                                                </div>
                                            </div>

                                        </div>

                                        <div class="form-group row">


                                            <label class="col-md-2 control-label">Last Product ?
                                            </label>

                                            <div class="col-md-4 inputGroupContainer">
                                                <div class="input-group">
                                                    <!--<span class="input-group-addon icon-border"><i class="fa fa-address-book faicons"></i></span>-->
                                                    YES:<input name="is_last_product_yes" value="yes"
                                                               placeholder="Is deleted" class="form-control"
                                                               type="radio">
                                                    NO:<input name="is_last_product_yes" value="no"
                                                              placeholder="Is deleted" class="form-control"
                                                              type="radio">

                                                </div>
                                            </div>
                                        </div>
                                        <br>


                                        <input type="hidden" value="" id="type_of_scale" name="type_of_scale">
                                        <input type="hidden" value="" id="model_of_purchase" name="model_of_purchase">
                                        <input type="hidden" value="" id="sub_model" name="sub_model">
                                        <input type="hidden" value="" id="sub_sub_model" name="sub_sub_model">
                                        <input type="hidden" value="{{global_count}}" name="global_count">


                                        <center>
                                            <button type="submit" value="submit"
                                                    class="btn btn-primary">Submit
                                            </button>

                                        </center>
                                    </form>


                                </div>
                                <!-- End of Page Wrapper -->

                                <!-- Scroll to Top Button-->

                            </div>
                        </div>
                    </div>


                    <script>
  function choice5(select) {


    $.ajax({                       // initialize an AJAX request
        url: "/stock_does_not_exist/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'model_of_purchase': $('#model_of_purchase').val(),     // add the country id to the GET parameters
          'type_of_scale': $("#type_of_scale").val(),      // add the country id to the GET parameters
          'sub_model': $("#sub_model").val(),       // add the country id to the GET parameters
          'sub_sub_model': $("#sub_sub_model").val(),      // add the country id to the GET parameters
          'godown': select.options[select.selectedIndex].value ,      // add the country id to the GET parameters
          'quantity': $("#quantity").val(),     // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function

    $("#rec_data").html(data);


        }
      });
}



                    </script>
                    <script type="text/javascript">
      function total_product_amount(){
    var rate = parseFloat(document.getElementById("rate").value);
            var quantity = parseFloat(document.getElementById("quantity").value);

            var total =Math.round(rate * quantity);

            document.getElementById("amount").value = total;
}
// create an interval calling the specified function every 10 seconds.

                    </script>
                    <script>
 function choice1(select) {
     //alert(select.options[select.selectedIndex].value);


       $("#type_of_scale").val(select.options[select.selectedIndex].text);

    $.ajax({                       // initialize an AJAX request
        url: "/load_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat").html(data);

    if ($('#id_subcat option').length > 1)
    {
    $('#id_subcat').attr('required', '');
    $('#id_subcat2').attr('required', '');
    $('#id_subcat22').attr('required', '');
    }
    else{
    $('#id_subcat').removeAttr('required');
    $('#id_subcat2').removeAttr('required');
    $('#id_subcat22').removeAttr('required');
    }



        }
      });
}
function choicemodel(select) {
$("#model_of_purchase").val(select.options[select.selectedIndex].text);
     //alert(select.options[select.selectedIndex].value);
    $.ajax({                       // initialize an AJAX request
        url: "/load_sub_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat2").html(data);

       if ($('#id_subcat2 option').length > 1)
    {
    $('#id_subcat2').attr('required', '');
    $('#id_subcat22').attr('required', '');


    }
    else{
    $('#id_subcat2').removeAttr('required');
    $('#id_subcat22').removeAttr('required');

    }


        }
      });
}

function choice_sub_model(select) {

$("#sub_model").val(select.options[select.selectedIndex].text);
     //alert(select.options[select.selectedIndex].value);
     $.ajax({                       // initialize an AJAX request
        url: "/get_product_details/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'model_of_purchase': $('#model_of_purchase').val(),     // add the country id to the GET parameters
          'type_of_scale': $("#type_of_scale").val(),      // add the country id to the GET parameters
          'sub_model': select.options[select.selectedIndex].value,       // add the country id to the GET parameters
        },
        success: function (data) {   // `data` is the return of the `load_cities` view function

    $("#product_details").html(data);
total_product_amount();

        }
      });

    $.ajax({                       // initialize an AJAX request
        url: "/load_sub_sub_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat22").html(data);

     if ($('#id_subcat2 option').length > 1)
    {
    $('#id_subcat22').removeAttr('required');

    }
    else{


    $('#id_subcat22').attr('required', '');

    }


        }
      });


}

function choice_sub_sub_model(select) {
$("#sub_sub_model").val(select.options[select.selectedIndex].text);
    $.ajax({                       // initialize an AJAX request
            url: "/get_product_details/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
            data: {
              'model_of_purchase': $('#model_of_purchase').val(),     // add the country id to the GET parameters
              'type_of_scale': $("#type_of_scale").val(),      // add the country id to the GET parameters
              'sub_model': $("#sub_model").val(),       // add the country id to the GET parameters
              'sub_sub_model': select.options[select.selectedIndex].value,      // add the country id to the GET parameters

            },
            success: function (data) {   // `data` is the return of the `load_cities` view function

        $("#product_details").html(data);
        total_product_amount();


            }
          });
}

function isOneChecked() {
  // All <input> tags...
  var chx = document.getElementsByTagName('input');
  for (var i=0; i<chx.length; i++) {
    // If you have more than one radio group, also check the name attribute
    // for the one you want as in && chx[i].name == 'choose'
    // Return true from the function on first match of a checked item
    if (chx[i].type == 'radio' && chx[i].checked) {
    alert("Are you sure it's last product?\n you will not be able to add product again.");
      return true;
    }
  }
  // End of the loop, return false
  alert("Please Select any one radio buttons in last product field.");
  return false;
}



                    </script>


                </div>
            </div>
        </div>
    </div>


    <!--end::Purchase-->
</div>
<!--end::Content-->
</div>
<!--end::Demo Panel-->
<!--begin::Global Config(global config for global JS scripts)-->

<!--end::Global Config-->
<!--begin::Global Theme Bundle(used by all pages)-->
<script src="{% static 'plugins/global/plugins.bundle.js' %}"></script>
<script src="{% static 'plugins/custom/prismjs/prismjs.bundle.js' %}"></script>
<script src="{% static 'js/scripts.bundle.js' %}"></script>
<!--end::Global Theme Bundle-->
<!--begin::Page Vendors(used by this page)-->
<script src="{% static 'plugins/custom/fullcalendar/fullcalendar.bundle.js' %}"></script>
<!--end::Page Vendors-->
<!--begin::Page Scripts(used by this page)-->
<script src="{% static 'js/pages/widgets.js' %}"></script>
<!--end::Page Scripts-->
</body>
<!--end::Body-->
</html>