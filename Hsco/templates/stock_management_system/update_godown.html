 <!DOCTYPE html>
<html lang="en">
<head>
  {% load static %}
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>HSCO</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<!--<script src = "http://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>-->
    <script src = "http://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js" type="text/javascript"></script>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Custom styles for this template-->
  <link href="{% static 'css/dashboard/sb-admin-2.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

</head>

<body id="page-top">

<style>
input:focus{
    outline: none;
}

* {
color:;
}
  .faicons {
  font-size: 18px;
  margin-top: 10px;
  padding-left: 10px;
  padding-right: 10px;
  color: #5a5c69;
  }

  .icon-border {
  border: 1px solid #d1d3e2;
  border-radius: 5px 1px 1px 5px;
  border-right: none;


  }

  .control-label {
  color: black;

  }

</style>

  <!-- Page Wrapper -->
  <div id="wrapper">
	{% include 'base_templates/sidebar.html' %}

    <!-- Sidebar -->
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">

      <!-- Main Content -->
      <div id="content" style="background-color: white;">


        <!-- Topbar -->
	{% include 'base_templates/navbar_for_dashboard.html' %}
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <center><h3>Stock Management System</h3></center>
               <div class="container-fluid" >

          {% if godown_msg %}

                     <div class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>Success : </strong> {{godown_msg}}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endif %}
          {% if product_deleted %}

                     <div class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>Success : </strong> {{product_deleted}}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
{% endif %}
{% if messages %}
    {% for message in messages %}
<div class="alert alert-success alert-dismissible fade show" role="alert">
  <strong>Success : </strong> {{ message }}
  <button type="button" class="close" data-dismiss="alert" aria-label="Close">
    <span aria-hidden="true">&times;</span>
  </button>
</div>    {% endfor %}

{% endif %}




          <!--<div class="row" style="padding:20px;">-->
               <!--&lt;!&ndash;<label class="col-md-6 control-label">CRM Number:</label>&ndash;&gt;-->

          <!--</div>-->




                    {% if request.user.role == 'Super Admin' or request.user.role == 'Admin' %}
        <center><h4>Godown</h4></center>
<br>
<form  method='POST' id="Customer_detail_form" enctype="multipart/form-data" >{% csrf_token %}


                          <div class="form-group row">
                              <label class="col-md-2 control-label">Name Of the Godown:</label>
                                  <div class="col-md-3 inputGroupContainer">
                                  <div class="input-group">
                                  <span class="input-group-addon icon-border"><i class="fa fa-users faicons"></i></span>
                                {{ form.name_of_godown }}
                          </div>
                        </div>

                                <label class="col-md-2 control-label">Godown Assign To:</label>
                              <div class="col-md-3 inputGroupContainer">
                              <div class="input-group">
                              <span class="input-group-addon icon-border"><i class="fa fa-users faicons"></i></span>
{% if request.user.role == 'Employee' or request.user.role == 'Manager' %}
         <select name="goddown_assign_to" class="form-control">
    <option value="{{ godown.goddown_assign_to }}"> {{ godown.goddown_assign_to }}</option>

 {% else %}
             <select name="goddown_assign_to" class="form-control">
    <option value="{{ godown.goddown_assign_to }}"> {{ godown.goddown_assign_to }}</option>
                   {% for user in assign_users %}
              <option value="{{user.profile_name}}">{{user.profile_name}}</option>

               {% endfor %}
                 </select>

     {% endif %}

                            </div>
                             </div>
                          </div>

                          <div class="form-group row">
                              <label class="col-md-2 control-label">location:</label>
                                  <div class="col-md-3 inputGroupContainer">
                                  <div class="input-group">
                                  <span class="input-group-addon icon-border"><i class="fa fa-users faicons"></i></span>
                                {{ form.location }}
                          </div>
                        </div>


                                <label class="col-md-2 control-label">Contact No:</label>
                              <div class="col-md-3 inputGroupContainer">
                              <div class="input-group">
                              <span class="input-group-addon icon-border"><i class="fa fa-users faicons"></i></span>
                                {{ form.contact_no }}
                            </div>
                             </div>
                          </div>

<div class="row">
    <div class="col-md-12">
    <center>
<button name="submit1" type="submit" class="btn btn-danger" style="background-color:#FC6E20;">Save</button>
</center>
    </div>
    </div>
</form>
            <br>
            <br>
            {% endif %}
            <center><h3>Added Products</h3></center>
  <!--Product List-->
<br>
<form method="POST" autocomplete="off">{% csrf_token%}

            <div class="row">

                            <div  class="col-xl-2 col-md-1">
                    <div class="button dropdown">
  <select id="divselector" name="scale_type"  onchange="choice1(this)" class="form-control btn btn-secondary">
       <option value="">Select Scale Type</option>

    {% for item in type_of_purchase_list %}
  <option value="{{item.pk}}">{{item.name}}</option>

   {% endfor %}

  </select>
</div>
                            </div>

<div  class="col-xl-2 col-md-2">
    <div class="button dropdown">

      <select id="id_subcat" name="main_category"  onchange="choice_model(this)" class="form-control btn btn-secondary">
  </select>
    </div>
</div>

<div  class="col-xl-1 col-md-1">
    <div class="button dropdown">
        <select id="id_subcat2" name="sub_category" onchange="choice_sub_model(this)" class="form-control btn btn-secondary">


  </select>
    </div>
</div>
<div  class="col-xl-2 col-md-2">
    <div class="button dropdown">
         <select  id="id_subcat22" name="sub_sub_category" onchange="choice_sub_sub_model(this)" class="form-control btn btn-secondary">


  </select>
    </div>
</div>
                                     <div  class="col-xl-1 col-md-1">
                    <button type="submit" name="submit3" class="btn btn-secondary">Sort</button>
                </div>

                <div class="col-md-2">
                               <button   onclick="location.href='/add_product_godown/{{godown.id}}'"  type="button" class="btn btn-primary" style="background-color:#FC6E20">Add Product</button>

                </div>
                 <div  class="col-xl-2 col-md-2">
           <button id="display_image"  type="button" class="btn btn-primary" style="background-color:#FC6E20">List / Image</button>
                 </div>


                </div>



                      </form>


                                    <style>
                .border_class {
                border:1px solid black;
                height:45px;
                text-align:center;
                vertical-align: middle;
                line-height: 45px;
                }


  table {
  border-collapse: collapse;
  width: 100%;
  font-size: 12px;
  border-color: black;
  color: black;



}


th {

  font-size: 13px;
    border: 1px solid black;
    text-align: left;
    padding:5px;

}

td {
  border: 1px solid black;
  padding: 3px;
  font-size: 13px;
  padding: 5px;
  text-align: center;
}


            </style>



<br>
            <script>
$(document).ready(function(){
    $("#image_title , #image ").toggle();
  $("#display_image").click(function(){
    $("#image_title , #image ").toggle();
  });
});
</script>
        <div class="row" id="id_manager_view">

    <table>
        <tr style="background-color: gray; color: white;">
            <td style="border-radius: 0px 0px 0px 0px; border: 0px solid gray;">Type Of Scale</td>
            <td style="border: 0px solid gray;">Model</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Model</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Sub Model</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Add/Remove</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Carton Count</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Quantity</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Individual Faulty</td>
                                {% if request.user.role == 'Super Admin' or request.user.role == 'Admin' %}
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Update</td>
            {% endif %}
            <td id="image_title" style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Image</td>


        </tr>


{% for product in godown_products %}
            <form method="POST" id="form" action=""  >{% csrf_token %}
{% if product.quantity <= product.critical_limit %}
        <tr bgcolor="red" style="cursor: pointer;" >
    {% else %}
        <tr >
    {% endif %}            <td style="border-radius: 0px 0px 0px 0px; border: 0px solid gray;">{{product.product_id.scale_type}}</td>
            <td style="border: 0px solid gray;">{{product.product_id.main_category}}</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{{product.product_id.sub_category}}</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{{product.product_id.sub_sub_category}} <input hidden name="product_id" id="product_id" value="{{product.id}}"></td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{% if product.quantity == 0 %}<button name="submit2" type="submit"><i class="fa fa-times" aria-hidden="true" style="font-size:15px;"></i></button>{% endif %}</td>
                                                    {% if request.user.role == 'Super Admin' or request.user.role == 'Admin' %}

                    <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;"><input  value="{{product.carton_count|floatformat:2}}" onchange="faulty_type_req()" name="carton_count"></td>
    <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;"><input value="{{product.quantity|floatformat:2}}" onchange="faulty_type_req()" name="quantity"></td>
    <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">

        <input value="{{product.individual_faulty|floatformat:2 }}" id="individual_faulty_id{{product.pk}}" name="individual_faulty" readonly type="number" step="0.2">
        <select style="height:25px;" name="faulty_type" class="faulty_type_id" required >
            <option value="">Select</option>
            <option value="Repaired">Repaired</option>
            <option value="Scrap">Scrap</option>
        </select>
        <select style="height:25px;" id="sel{{product.pk}}" name="convert_faulty_quantity" class="select_faulty" ></select>

    </td>
                    <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">  <button type="submit" name="update_stock" class="btn btn-primary">Update</button></td>
                    {% else %}
        <td style="border: 0px solid gray;">{{product.carton_count|floatformat:2}}</td>
            <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{{product.quantity|floatformat:2}}</td>
                    <td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{{product.individual_faulty|floatformat:2 }}</td>
            {% endif %}
            <td id="image" style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">{% if product.product_id.product_image %}<img height="40" width="40" src="{{product.product_id.product_image.url}}">{% endif %}</td>
        </tr>
            </form>
        <script>
function write_opt(ID){
    var num = parseFloat(document.getElementById("individual_faulty_id"+ID).value)
var $select = $("#sel"+ID);
    for (i=0;i<=num;i++){
        $select.append($('<option></option>').val(i).html(i))
    }
}
write_opt({{product.pk}});

</script>


{% endfor %}



    </table>


<script>

function faulty_type_req(){
        $('.faulty_type_id').removeAttr('required');
    }

</script>


        </div>
    <!--<br>-->
    <!--<br>-->
    <!--<center><h3>Added Products</h3></center>-->
    <!--<br>-->
    <!--<br>-->


    <!--<div class="row" id="abhish123">-->

    <!--<table>-->
        <!--<tr style="background-color: gray; color: white;">-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border: 0px solid gray;">Type Of Scale</td>-->
            <!--<td style="border: 0px solid gray;">Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Add/Remove</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Carton Count</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Quantity</td>-->


        <!--</tr>-->



        <!--<tr>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border: 0px solid gray;">Type Of Scale</td>-->
            <!--<td style="border: 0px solid gray;">Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;"><i class="fa fa-times" aria-hidden="true" style="font-size:15px;"></i></td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">0</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">0</td>-->
        <!--</tr>-->


        <!--<tr>-->

            <!--<td style="border-radius: 0px 0px 0px 0px; border: 0px solid gray;">Type Of Scale</td>-->
            <!--<td style="border: 0px solid gray;">Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">Sub Sub Model</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;"><i class="fa fa-times" aria-hidden="true" style="font-size:15px;"></i></td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">0</td>-->
            <!--<td style="border-radius: 0px 0px 0px 0px; border:0px solid gray;">0</td>-->
<!--</tr>-->


    <!--</table>-->





        <!--</div>-->
    <br>
    <br>

    <!--<div class="row">-->
    <!--<div class="col-md-12">-->
    <!--<center>-->
<!--<button type="submit" class="btn btn-danger" style="background-color:#FC6E20;">Save</button>-->
<!--</center>-->
    <!--</div>-->
    <!--</div>-->


    <br>
    <br><br>
    <br><br>
    <br>



            </div>


                </div>
              </div>
            </div>
      </div>



  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

<script>
function choice1(select) {
     //alert(select.options[select.selectedIndex].value);


       $("#type_of_scale").val(select.options[select.selectedIndex].text);

    $.ajax({                       // initialize an AJAX request
        url: "/load_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat").html(data);

    if ($('#id_subcat option').length > 1)
    {

    }
    else{
    $('#id_subcat').removeAttr('required');
    $('#id_subcat2').removeAttr('required');
    $('#id_subcat22').removeAttr('required');
    }



        }
      });
}
function choice_model(select) {
$("#model_of_purchase").val(select.options[select.selectedIndex].text);
     //alert(select.options[select.selectedIndex].value);
    $.ajax({                       // initialize an AJAX request
        url: "/load_sub_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat2").html(data);

       if ($('#id_subcat2 option').length > 1)
    {



    }
    else{
    $('#id_subcat2').removeAttr('required');
    $('#id_subcat22').removeAttr('required');

    }


        }
      });
}

function choice_sub_model(select) {
$("#sub_model").val(select.options[select.selectedIndex].text);
     //alert(select.options[select.selectedIndex].value);
    $.ajax({                       // initialize an AJAX request
        url: "/load_sub_sub_models/",                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
        data: {
          'item_id': select.options[select.selectedIndex].value       // add the country id to the GET parameters

        },
        success: function (data) {   // `data` is the return of the `load_cities` view function
    $("#id_subcat22").html(data);

     if ($('#id_subcat22 option').length > 1)
    {

    }
    else{
    $('#id_subcat22').removeAttr('required');

    }


        }
      });
}

function choice_sub_sub_model(select) {
$("#sub_sub_model").val(select.options[select.selectedIndex].text);

}

function isOneChecked() {
  // All <input> tags...
  var chx = document.getElementsByTagName('input');
  for (var i=0; i<chx.length; i++) {
    // If you have more than one radio group, also check the name attribute
    // for the one you want as in && chx[i].name == 'choose'
    // Return true from the function on first match of a checked item
    if (chx[i].type == 'radio' && chx[i].checked) {
    alert("Are you sure it's last product?\n you will not be able to add product again.");
      return true;
    }
  }
  // End of the loop, return false
  alert("Please Select any one radio buttons in last product field.");
  return false;
}


  </script>


  <!-- Bootstrap core JavaScript-->
  <script src="{% static 'js/dashboard/jquery.min.js' %}"></script>
  <script src="{% static 'js/dashboard/bootstrap.bundle.min.js' %}"></script>

  <!-- Core plugin JavaScript-->
  <script src="{% static 'jjs/dashboard/jquery.easing.min.js' %}"></script>

  <!-- Custom scripts for all pages-->
  <script src="{% static 'js/dashboard/sb-admin-2.min.js' %}"></script>

    </div>
  </div>

</body>

</html>
